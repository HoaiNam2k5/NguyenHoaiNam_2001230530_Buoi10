CREATE DATABASE QL_THUVIEN
USE QL_THUVIEN
GO
CREATE TABLE KHACHHANG(
MAKH VARCHAR(50) NOT NULL PRIMARY KEY,
HOTEN NVARCHAR(50),
NGAYSINH DATE,
GIOITINH VARCHAR(10),
DIENTHOAI INT,
TAIKHOAN VARCHAR(20),
MATKHAU VARCHAR(20),
EMAIL VARCHAR(30),
DIACHI NVARCHAR(50)
);
CREATE TABLE DONHANG(
MADONHANG VARCHAR(50) NOT NULL PRIMARY KEY,
NGAYGIAO DATE,
NGAYDAT DATE,
DATHANHTOAN NVARCHAR(10),
TINHTRANGGIAOHANG NVARCHAR(10),
MAKH VARCHAR(50),
FOREIGN KEY (MAKH) REFERENCES KHACHHANG(MAKH)
)
CREATE TABLE TACGIA (
MATACGIA VARCHAR(50) NOT NULL PRIMARY KEY,
TENTACGIA NVARCHAR(50),
DIACHI NVARCHAR(50),
TIEUSU NVARCHAR(100),
DIENTHOAI INT);
CREATE TABLE NHAXUATBAN(
MANXB VARCHAR(50) NOT NULL PRIMARY KEY,
TENNXB NVARCHAR(50),
DIACHI NVARCHAR(50),
DIENTHOAI INT);
CREATE TABLE CHUDE(
MACHUDE VARCHAR(50) NOT NULL PRIMARY KEY,
TENCHUDE NVARCHAR(50));
CREATE TABLE SACH(
MASACH VARCHAR(50) NOT NULL PRIMARY KEY,
TENSACH NVARCHAR(50),
GIABAN MONEY,
MOTA NVARCHAR(100),
NGAYCAPNHAP DATE,
ANHBIA VARCHAR(50),
SOLUONGTON INT,
MACHUDE VARCHAR(50),
MANXB VARCHAR(50),
FOREIGN KEY (MACHUDE) REFERENCES CHUDE(MACHUDE),
FOREIGN KEY (MANXB) REFERENCES NHAXUATBAN(MANXB));
CREATE TABLE CHITIETDONHANG(
MADONHANG VARCHAR(50),
MASACH VARCHAR(50),
SOLUONG INT,
GIABAN MONEY,
PRIMARY KEY(MADONHANG,MASACH),
FOREIGN KEY (MADONHANG) REFERENCES DONHANG(MADONHANG),
FOREIGN KEY (MASACH) REFERENCES SACH(MASACH));
CREATE TABLE THAMGIA(
MASACH VARCHAR(50),
MATACGIA VARCHAR(50),
VAITRO NVARCHAR(50),
VITRI NVARCHAR(50),
PRIMARY KEY (MASACH,MATACGIA),
FOREIGN KEY (MASACH) REFERENCES SACH(MASACH),
FOREIGN KEY (MATACGIA) REFERENCES TACGIA(MATACGIA));
INSERT INTO KHACHHANG VALUES 
('KH01',N'NGUYỄN HOÀI NAM','2005-12-02','NAM',043322323,'HOAINAM','MK01','NAMTQN2@GMAIL.COM',N'TP.HCM'),
('KH02',N'PHẠM HOÀI PHÚC','2003-10-02','NAM',042322323,'HOAIPHUC','MK02','PHUCQQ@GMAIL.COM',N'ĐỒNG NAI'),
('KH03',N'NGUYỄN PHÚC','1999-04-03','NAM',073322323,'NPHUC','MK03','NGUYENPHUC@GMAIL.COM',N'TP.HCM'),
('KH04',N'ĐIỀN THỊ VI','1993-11-12','NU',093322323,'DIENVI','MK04','VIBEUTI@GMAIL.COM',N'TP.HCM'),
('KH05',N'PHẠM TRÚC ANH','2005-12-06','NU',043322323,'TRUCANH','MK05','TRUCANHCUTE@GMAIL.COM',N'TP.HCM')
INSERT INTO CHUDE VALUES 
('CD01',N'ÂM NHẠC'),
('CD02',N'CÔNG NGHỆ THÔNG TIN'),
('CD03',N'DOANH NHÂN'),
('CD04',N'DU LỊCH'),
('CD05',N'KHOA HỌC KỸ THUẬT'),
('CD06',N'KHOA HỌC VẬT LÝ'),
('CD07',N'KHOA HỌC XÃ HỘI')
INSERT INTO NHAXUATBAN VALUES
('NXB01',N'ĐẠI HỌC QUỐC GIA',N'TP.HCM',0938433382),
('NXB02',N'KHOA HỌC & KỸ THUẬT',N'TP.HCM',093843382),
('NXB03',N'KIM ĐỒNG',N'ĐỒNG NAI',093843382),
('NXB04',N'NHÀ XUẤT BẢN TRẺ',N'TP.HCM',0938433882),
('NXB05',N'NXB HỒNG PHÚC',N'TP.HCM',0934333882),
('NXB06',N'NXB LAO ĐỘNG VÀ XÃ HỘI',N'TP.HCM',0934333882),
('NXB07',N'NXB PHỤ NỮ',N'HÀ NỘI',0938333882)
INSERT INTO SACH VALUES
('S01', N'LẬP TRÌNH C++ CƠ BẢN', 95000, N'Sách hướng dẫn lập trình C++ cho người mới bắt đầu', '2024-03-15', 'cplus.jpg', 120, 'CD02', 'NXB02'),
('S02', N'HÀNH TRÌNH VIỆT NAM', 85000, N'Sách du lịch khám phá các vùng miền Việt Nam', '2024-05-10', 'dulich.jpg', 80, 'CD04', 'NXB04'),
('S03', N'NHỮNG NHÀ DOANH NHÂN THÀNH CÔNG', 120000, N'Bí quyết thành công trong kinh doanh', '2024-07-01', 'doanhnhan.jpg', 60, 'CD03', 'NXB05'),
('S04', N'CƠ HỌC LƯỢNG TỬ CƠ BẢN', 150000, N'Giới thiệu các khái niệm nền tảng trong vật lý lượng tử', '2024-02-20', 'vatly.jpg', 45, 'CD06', 'NXB01'),
('S05', N'KHOA HỌC & ĐỜI SỐNG', 78000, N'Sách phổ biến kiến thức khoa học kỹ thuật hiện đại', '2024-04-18', 'khoahoc.jpg', 100, 'CD05', 'NXB02');

-- ====== BẢNG TÁC GIẢ ======
INSERT INTO TACGIA VALUES
('TG01', N'Nguyễn Nhật Ánh', N'TP.HCM', N'Tác giả nổi tiếng với các tác phẩm dành cho thiếu nhi', 0911111111),
('TG02', N'Trần Văn Cường', N'Hà Nội', N'Chuyên gia trong lĩnh vực công nghệ phần mềm', 0922222222),
('TG03', N'Lê Thu Trang', N'Đà Nẵng', N'Tác giả viết về du lịch và văn hóa Việt Nam', 0933333333),
('TG04', N'Phạm Văn Minh', N'TP.HCM', N'Giảng viên vật lý tại đại học Quốc Gia', 0944444444),
('TG05', N'Hồ Thị Hạnh', N'Cần Thơ', N'Nhà báo, nhà văn chuyên viết sách kinh doanh', 0955555555);

-- ====== BẢNG THAM GIA (liên kết Sách - Tác giả) ======
INSERT INTO THAMGIA VALUES
('S01', 'TG02', N'Tác giả chính', N'TP.HCM'),
('S02', 'TG03', N'Tác giả chính', N'Hà Nội'),
('S03', 'TG05', N'Tác giả chính', N'TP.HCM'),
('S04', 'TG04', N'Tác giả chính', N'TP.HCM'),
('S05', 'TG02', N'Đồng tác giả', N'TP.HCM');

-- ====== BẢNG ĐƠN HÀNG ======
INSERT INTO DONHANG VALUES
('DH01', '2024-03-20', '2024-03-15', N'Rồi', N'Đã giao', 'KH01'),
('DH02', '2024-05-25', '2024-05-20', N'Chưa', N'Đang giao', 'KH02'),
('DH03', '2024-07-10', '2024-07-05', N'Rồi', N'Đã giao', 'KH03'),
('DH04', '2024-08-02', '2024-07-28', N'Chưa', N'Chưa giao', 'KH04'),
('DH05', '2024-09-01', '2024-08-25', N'Rồi', N'Đã giao', 'KH05');

-- ====== BẢNG CHI TIẾT ĐƠN HÀNG ======
INSERT INTO CHITIETDONHANG VALUES
('DH01', 'S01', 1, 95000),
('DH01', 'S05', 2, 78000),
('DH02', 'S02', 1, 85000),
('DH03', 'S03', 1, 120000),
('DH04', 'S04', 1, 150000),
('DH05', 'S02', 1, 85000),
('DH05', 'S03', 1, 120000);
select *from KhachHang